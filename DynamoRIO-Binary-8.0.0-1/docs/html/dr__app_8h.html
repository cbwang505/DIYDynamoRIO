<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<title>DynamoRIO API: C:/projects/dynamorio/build/build_release-32/include/dr_app.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DynamoRIO API
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dr__app_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dr_app.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>DR's application interface for running portions of a program under its control.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abcdedd068a4d264401c31767355ec218"><td class="memItemLeft" align="right" valign="top">DR_APP_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__app_8h.html#abcdedd068a4d264401c31767355ec218">dr_app_setup</a> (void)</td></tr>
<tr class="separator:abcdedd068a4d264401c31767355ec218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a216ee7d3e25b4c31edf5a9b2ba93d533"><td class="memItemLeft" align="right" valign="top">DR_APP_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__app_8h.html#a216ee7d3e25b4c31edf5a9b2ba93d533">dr_app_cleanup</a> (void)</td></tr>
<tr class="separator:a216ee7d3e25b4c31edf5a9b2ba93d533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb7b7aed03dd6f0ed8d48b8a8796e55e"><td class="memItemLeft" align="right" valign="top">DR_APP_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__app_8h.html#afb7b7aed03dd6f0ed8d48b8a8796e55e">dr_app_start</a> (void)</td></tr>
<tr class="separator:afb7b7aed03dd6f0ed8d48b8a8796e55e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd509bb9ea5d1947228de48dda256e8f"><td class="memItemLeft" align="right" valign="top">DR_APP_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__app_8h.html#afd509bb9ea5d1947228de48dda256e8f">dr_app_stop</a> (void)</td></tr>
<tr class="separator:afd509bb9ea5d1947228de48dda256e8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43dead944cb3c75de2537404b568f8ec"><td class="memItemLeft" align="right" valign="top">DR_APP_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__app_8h.html#a43dead944cb3c75de2537404b568f8ec">dr_app_take_over</a> (void)</td></tr>
<tr class="separator:a43dead944cb3c75de2537404b568f8ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace92a2658a46bb5811ece68ae964fd62"><td class="memItemLeft" align="right" valign="top">DR_APP_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__app_8h.html#ace92a2658a46bb5811ece68ae964fd62">dr_app_setup_and_start</a> (void)</td></tr>
<tr class="separator:ace92a2658a46bb5811ece68ae964fd62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e062573c669d8a5564abf54ebf90f31"><td class="memItemLeft" align="right" valign="top">DR_APP_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__app_8h.html#a7e062573c669d8a5564abf54ebf90f31">dr_app_stop_and_cleanup</a> (void)</td></tr>
<tr class="separator:a7e062573c669d8a5564abf54ebf90f31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af046ebf6c44ab47decbb4eba61236dcc"><td class="memItemLeft" align="right" valign="top">DR_APP_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__app_8h.html#af046ebf6c44ab47decbb4eba61236dcc">dr_app_stop_and_cleanup_with_stats</a> (<a class="el" href="dr__defines_8h.html#a213f155f07a830b79111449062545352">dr_stats_t</a> *drstats)</td></tr>
<tr class="separator:af046ebf6c44ab47decbb4eba61236dcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea917a6c24c8bf526f77772b0b9848a8"><td class="memItemLeft" align="right" valign="top">DR_APP_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__app_8h.html#aea917a6c24c8bf526f77772b0b9848a8">dr_app_running_under_dynamorio</a> (void)</td></tr>
<tr class="separator:aea917a6c24c8bf526f77772b0b9848a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba46eea03a20e5801b87b7cd54d26bf5"><td class="memItemLeft" align="right" valign="top">DR_APP_API void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__app_8h.html#aba46eea03a20e5801b87b7cd54d26bf5">dr_app_handle_mbr_target</a> (void *target)</td></tr>
<tr class="separator:aba46eea03a20e5801b87b7cd54d26bf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>DR's application interface for running portions of a program under its control. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a216ee7d3e25b4c31edf5a9b2ba93d533"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a216ee7d3e25b4c31edf5a9b2ba93d533">&#9670;&nbsp;</a></span>dr_app_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_APP_API int dr_app_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Application-wide cleanup. Prints statistics. Returns zero on success. Once this is invoked, calling <a class="el" href="dr__app_8h.html#afb7b7aed03dd6f0ed8d48b8a8796e55e">dr_app_start()</a> or <a class="el" href="dr__app_8h.html#abcdedd068a4d264401c31767355ec218">dr_app_setup()</a> is not supported. This should be invoked at application exit, after joining with application threads. If the application wants to continue executing significant code or executing additional threads after cleanup, it should use <a class="el" href="dr__app_8h.html#a7e062573c669d8a5564abf54ebf90f31">dr_app_stop_and_cleanup()</a> instead. </p>

</div>
</div>
<a id="aba46eea03a20e5801b87b7cd54d26bf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba46eea03a20e5801b87b7cd54d26bf5">&#9670;&nbsp;</a></span>dr_app_handle_mbr_target()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_APP_API void* dr_app_handle_mbr_target </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DynamoRIO's (experimental) native execution mode supports running some modules natively while the others run under DynamoRIO. When a module is running natively, it may jump to a module that should be executed under DynamoRIO directly without going through DynamoRIO. To handle this situation, the application code should call this routine and use the returned stub pc as the branch target instead. </p><dl class="section note"><dt>Note</dt><dd>Linux only. </dd>
<dd>
Native execution mode only. </dd>
<dd>
Experimental support. </dd></dl>

</div>
</div>
<a id="aea917a6c24c8bf526f77772b0b9848a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea917a6c24c8bf526f77772b0b9848a8">&#9670;&nbsp;</a></span>dr_app_running_under_dynamorio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_APP_API bool dr_app_running_under_dynamorio </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Indicates whether the current thread is running within the DynamoRIO code cache. Returns <code>true</code> only if the current thread is running within the DynamoRIO code cache and returns false othrewise.</p>
<dl class="section note"><dt>Note</dt><dd>This routines returns <code>false</code> if the current thread is running within the DynamoRIO probe mode. </dd></dl>

</div>
</div>
<a id="abcdedd068a4d264401c31767355ec218"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcdedd068a4d264401c31767355ec218">&#9670;&nbsp;</a></span>dr_app_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_APP_API int dr_app_setup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Application-wide initialization. Must be called before any other API function. Returns zero on success. </p>

</div>
</div>
<a id="ace92a2658a46bb5811ece68ae964fd62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace92a2658a46bb5811ece68ae964fd62">&#9670;&nbsp;</a></span>dr_app_setup_and_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_APP_API int dr_app_setup_and_start </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calls <a class="el" href="dr__app_8h.html#abcdedd068a4d264401c31767355ec218">dr_app_setup()</a> and, if it succeeds, calls <a class="el" href="dr__app_8h.html#afb7b7aed03dd6f0ed8d48b8a8796e55e">dr_app_start()</a>. Returns the result of <a class="el" href="dr__app_8h.html#abcdedd068a4d264401c31767355ec218">dr_app_setup()</a>, which returns zero on success. This routine is intended as a convenient single point of entry for callers who are using dlsym() or GetProcAddress() to access the app API. </p>

</div>
</div>
<a id="afb7b7aed03dd6f0ed8d48b8a8796e55e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb7b7aed03dd6f0ed8d48b8a8796e55e">&#9670;&nbsp;</a></span>dr_app_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_APP_API void dr_app_start </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Causes the application to run under DR control upon return from this call. Attempts to take over any existing threads in the application.</p>
<dl class="section warning"><dt>Warning</dt><dd>On Linux, DR detects threads by listing thread ids in the current process's thread group. This, and other queries about the current process may fail if the main thread has quit. DR also assumes the threads all share signal handlers, as is the case for pthreads. Violating these assumptions will lead to unpredictable behavior. </dd></dl>

</div>
</div>
<a id="afd509bb9ea5d1947228de48dda256e8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd509bb9ea5d1947228de48dda256e8f">&#9670;&nbsp;</a></span>dr_app_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_APP_API void dr_app_stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Causes all of the application's threads to run directly on the machine upon return from this call; no effect if the application is not currently running under DR control. </p>

</div>
</div>
<a id="a7e062573c669d8a5564abf54ebf90f31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e062573c669d8a5564abf54ebf90f31">&#9670;&nbsp;</a></span>dr_app_stop_and_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_APP_API void dr_app_stop_and_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Causes all of the application's threads to run directly on the machine upon return from this call, and additionally frees the resources used by DR. Once this is invoked, calling <a class="el" href="dr__app_8h.html#afb7b7aed03dd6f0ed8d48b8a8796e55e">dr_app_start()</a> is not supported until <a class="el" href="dr__app_8h.html#abcdedd068a4d264401c31767355ec218">dr_app_setup()</a> or <a class="el" href="dr__app_8h.html#ace92a2658a46bb5811ece68ae964fd62">dr_app_setup_and_start()</a> is called for a re-attach. Re-attach, however, is considered an experimental feature and is not guaranteed to be without problems, in particular when DR or extension libraries are static and there is no simple way to reset the state of global variables.</p>
<p>This call has no effect if the application is not currently running under DR control. </p>

</div>
</div>
<a id="af046ebf6c44ab47decbb4eba61236dcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af046ebf6c44ab47decbb4eba61236dcc">&#9670;&nbsp;</a></span>dr_app_stop_and_cleanup_with_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_APP_API void dr_app_stop_and_cleanup_with_stats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dr__defines_8h.html#a213f155f07a830b79111449062545352">dr_stats_t</a> *&#160;</td>
          <td class="paramname"><em>drstats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Same as dr_app_stop_and_cleanup, additionally filling in the provided dr_stats_t object, after all threads have been detached and right before clearing stats. The parameter may be NULL, in which case stats are not collected, the API behaving identically to <a class="el" href="dr__app_8h.html#a7e062573c669d8a5564abf54ebf90f31">dr_app_stop_and_cleanup()</a>. </p>

</div>
</div>
<a id="a43dead944cb3c75de2537404b568f8ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43dead944cb3c75de2537404b568f8ec">&#9670;&nbsp;</a></span>dr_app_take_over()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_APP_API void dr_app_take_over </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Causes application to run under DR control upon return from this call. DR never releases control. Useful for overriding dr_app_start/dr_app_stop calls in the rest of a program. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_6b22811b707041e99bf2bedd0d8fbd4f.html">include</a></li><li class="navelem"><a class="el" href="dr__app_8h.html">dr_app.h</a></li>
    <li class="footer" style="float:none;text-align:center"><img border=0 src="favicon.png"> &nbsp;  DynamoRIO API version 8.0.0 --- Wed Apr 22 2020 00:42:05 &nbsp; <img border=0 src="favicon.png">
</small></address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
